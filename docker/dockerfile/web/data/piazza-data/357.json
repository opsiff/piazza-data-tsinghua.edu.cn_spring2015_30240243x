{"aid": "igkpqgodjtlk", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 8, "request_instructor": 0, "history": [{"uid": "hdjonbiyfs62ie", "anon": "no", "created": "2015-04-27T06:45:41Z", "content": "<p>有兴趣的同学&#xff0c;请在此回复你的答案。这可能是一个期末考试题目。</p>", "subject": "无符号数的有符号比较会产生什么效果&#xff1f;"}, {"uid": "hdjonbiyfs62ie", "anon": "no", "created": "2015-04-27T06:44:55Z", "content": "<p>有兴趣的同学&#xff0c;请在此回复你的答案。这可以是一个期末考试题目。</p>", "subject": "无符号数的有符号比较会产生什么效果&#xff1f;"}], "s_edits": [], "tag_good_arr": [], "is_bookmarked": false, "my_favorite": false, "t": 1446636019693, "children": [{"uid": "i6s09f3xHOf", "no_answer": 0, "created": "2015-04-27T06:48:30Z", "id": "i8zix6r2f2d0", "updated": "2015-04-27T06:48:30Z", "subject": "<p>李心成 陈振寰</p>\n<p>无符号数a&#xff0c;b&#xff0c;刚开始令a=b&#xff0c;a加完后溢出&#xff0c;对其进行有符号比较&#xff0c;此时a是正数&#xff0c;b是负数&#xff0c;a&gt;b&#xff0c;比较成功。</p>\n<p>代码中是先做a-b再将其转换为有符号&#xff0c;因此别的情况没有问题。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "no_upvotes": 0, "children": [], "type": "followup"}, {"uid": "i6rgfjo5j1r6c", "no_answer": 0, "created": "2015-04-27T06:56:42Z", "id": "i8zj7qpzsun46u", "updated": "2015-04-27T06:56:42Z", "subject": "<p></p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "no_upvotes": 0, "children": [], "type": "followup"}, {"uid": "i6roqnlkmtw", "no_answer": 0, "created": "2015-04-27T11:53:06Z", "id": "i8ztswx7mo273u", "updated": "2015-04-27T11:53:06Z", "subject": "<p>无符号整数ab作为两个stride<br />假设开始的时候a=b&#xff0c;之后b先增加。如果b没有溢出的话&#xff0c;此时a-b&lt;0&#xff0c;之后应该轮到a增加&#xff0c;此时是成功的。</p>\n<p>如果b溢出了话<br />首先看到schedule/default_sched.c中有一句 #define BIG_STRIDE 0x7FFFFFFF<br />因为stride每次的增量都是 BIG_STRIDE / priority&#xff0c;所以stride每次最大的增量不会超过BIG_STRIDE <br />那么因为b溢出了&#xff0c;所以b在溢出之前&#xff0c;ab相等&#xff0c;且无符号大于0x7FFFFFFF<br />                               在b溢出之后&#xff0c;a仍然保持原来大于0x7FFFFFFF&#xff0c;b小于0x7FFFFFFF<br />                               且a-b无符号大于0x7FFFFFFF&#xff08;因为b的步进值小于0x7FFFFFFF&#xff09;&#xff0c;也就是有符号小于0&#xff0c;仍然是成功的</p>\n<p></p>\n<p></p>\n<p>所以问题的关键就在于#define BIG_STRIDE 0x7FFFFFFF<br />这个值必须是有符号整数的最大值&#xff0c;这个是保证stride不会出错的原因<br />举个例子&#xff0c;把BIG_STRIDE增大&#xff0c;BIG_STRIDE=0xE0000000<br />那么初始令a=b=0xE0000000&#xff0c;b先前进0xE0000000&#xff0c;b变为0xC0000000&#xff0c;此时就有a-b&gt;0&#xff0c;stride算法就错了</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "no_upvotes": 0, "children": [{"uid": "hdjonbiyfs62ie", "created": "2015-04-29T06:20:06Z", "id": "i92csdu3s7o6qk", "updated": "2015-04-29T06:20:06Z", "subject": "<p>这是一个优秀的回答。相关内容可能在期末考试中出现。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "hrhsj9t1wSn", "no_answer": 0, "created": "2015-04-28T07:22:33Z", "id": "i90zkuejpy33h7", "updated": "2015-04-28T07:22:33Z", "subject": "<p><a href=\"http://www.kuqin.com/linux/20130710/334644.html\">http://www.kuqin.com/linux/20130710/334644.html</a></p>\n<p></p>\n<p>2013年&#xff0c;Linux 内核曾爆出了一个严重的安全漏洞&#xff0c;非root用户可以通过该漏洞的 exploit 获取root权限。这并不罕见&#xff0c;值得一提的是这个补丁看起来如此平常以至于我们绝大多数人都不会以为这是安全问题。<br /><br />先看这个问题的补丁&#xff0c;就是下面这个&#xff1a;<br /><br />  static int perf_swevent_init(struct perf_event *event)<br /> {<br />-    int event_id = event-&gt;attr.config;<br />&#43;    u64 event_id = event-&gt;attr.config;<br /><br />     if (event-&gt;attr.type != PERF_TYPE_SOFTWARE)<br />         return -ENOENT;<br /><br />我们第一眼的感觉就是这大概只是修复了编译器报的一个小警告吧&#xff0c;怎么会引起如此严重的安全问题呢&#xff1f;</p>\n<p></p>\n<p>如果传递进来的 event-&gt;attr.config 值正好设置了符号位&#xff0c;那么 event_id 就会变成负值&#xff0c;而且能躲过上面的检查。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "no_upvotes": 0, "children": [], "type": "followup"}, {"uid": "i6zqr3gqgef46t", "no_answer": 0, "created": "2015-05-01T11:05:19Z", "id": "i95huvptscg7gm", "updated": "2015-05-01T11:05:19Z", "subject": "<p>开始有A=B,最大步进S</p>\n<p>1.B&#43;S不溢出则需A&lt;B&#43;S,即0&lt;S,即S&lt;2^31</p>\n<p>2.B&#43;S溢出代表B&#43;S&gt;=2^32</p>\n<p>溢出后B&#39;=B&#43;S-2^32</p>\n<p>此时为使A-B&#39;&lt;0,需要A&gt;=B&#39;&#43;2^31</p>\n<p>即A&gt;=B&#43;S-2^32&#43;2^31=B&#43;S-2^31</p>\n<p>又由A=B</p>\n<p>有0&gt;=S-2^31</p>\n<p>即S&lt;=2^31</p>\n<p>综合有S&lt;2^31</p>\n<p>即S&lt;=0x7FFFFFFF</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 9, "bucket_name": "Week 4/26 - 5/2", "no_upvotes": 0, "children": [], "type": "followup"}, {"no_answer": 1, "created": "2015-05-25T17:18:56Z", "id": "ia45rsqvfwx7b6", "updated": "2015-05-25T17:18:56Z", "subject": "上面同学回答的都是一个加完后溢出&#xff0c;另外的一定是负数&#xff08;两者相距不超过最大步长&#xff09;&#xff0c;这时候两者相减是没有问题的&#xff0c;但是我想问&#xff0c;如果ab本身都是正数&#xff0c;a加完后变为负数了&#xff0c;按理这时候应该执行b&#xff0c;但按上述理论不就先执行a了吗&#xff0c;这个要怎么解释呢&#xff1f;", "anon": "stud", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}], "type": "note", "unique_views": 81, "created": "2015-04-27T06:44:55Z", "id": "i8zislb2s6h6hb", "tags": ["instructor-note", "lab6", "课堂问答"], "nr": 357, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["lab6", "课堂问答"], "bucket_order": 2, "change_log": [{"uid": "hdjonbiyfs62ie", "when": "2015-04-27T06:44:55Z", "data": "i8zislb4yd6hc", "anon": "no", "type": "create"}, {"uid": "hdjonbiyfs62ie", "when": "2015-04-27T06:45:41Z", "data": "i8zitknxu77yq", "anon": "no", "type": "update"}, {"uid": "i6s09f3xHOf", "when": "2015-04-27T06:48:30Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "followup"}, {"uid": "i6rgfjo5j1r6c", "when": "2015-04-27T06:56:42Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "followup"}, {"uid": "i6roqnlkmtw", "when": "2015-04-27T11:53:06Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "followup"}, {"uid": "hrhsj9t1wSn", "when": "2015-04-28T07:22:33Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "followup"}, {"uid": "hdjonbiyfs62ie", "when": "2015-04-29T06:20:06Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "feedback"}, {"uid": "i6zqr3gqgef46t", "when": "2015-05-01T11:05:19Z", "to": "i8zislb2s6h6hb", "anon": "no", "type": "followup"}, {"when": "2015-05-25T17:18:56Z", "to": "i8zislb2s6h6hb", "anon": "stud", "type": "followup"}], "bucket_name": "Today", "request_instructor_me": false, "no_answer_followup": 1, "num_favorites": 6, "tag_good": []}}