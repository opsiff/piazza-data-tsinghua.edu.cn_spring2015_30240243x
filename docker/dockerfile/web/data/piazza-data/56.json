{"aid": "igkozjwf11d1ey", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 3, "request_instructor": 0, "history": [{"uid": "i6uqzf449em3ex", "anon": "no", "created": "2015-03-09T14:26:08Z", "content": "<p>commit d862f5042486e81a0241e9196306d28f4f72acf0</p>\n<p></p>\n<p>moocos-&gt; rm a.out &amp;&amp; gcc -g lab1-ex0.s &amp;&amp; strace ./a.out<br />execve(&#34;./a.out&#34;, [&#34;./a.out&#34;], [/* 36 vars */]) = 0<br />brk(0) = 0x23ca000<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK) = -1 ENOENT (No such file or directory)<br />mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1cd4feb000<br />access(&#34;/etc/ld.so.preload&#34;, R_OK) = -1 ENOENT (No such file or directory)<br />open(&#34;/etc/ld.so.cache&#34;, O_RDONLY|O_CLOEXEC) = 3<br />fstat(3, {st_mode=S_IFREG|0644, st_size=93381, ...}) = 0<br />mmap(NULL, 93381, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f1cd4fd4000<br />close(3) = 0<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK) = -1 ENOENT (No such file or directory)<br />open(&#34;/lib/x86_64-linux-gnu/libc.so.6&#34;, O_RDONLY|O_CLOEXEC) = 3<br />read(3, &#34;\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0\\320\\37\\2\\0\\0\\0\\0\\0&#34;..., 832) = 832<br />fstat(3, {st_mode=S_IFREG|0755, st_size=1845024, ...}) = 0<br />mmap(NULL, 3953344, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1cd4a05000<br />mprotect(0x7f1cd4bc0000, 2097152, PROT_NONE) = 0<br />mmap(0x7f1cd4dc0000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1bb000) = 0x7f1cd4dc0000<br />mmap(0x7f1cd4dc6000, 17088, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1cd4dc6000<br />close(3) = 0<br />mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1cd4fd3000<br />mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1cd4fd1000<br />arch_prctl(ARCH_SET_FS, 0x7f1cd4fd1740) = 0<br />mprotect(0x7f1cd4dc0000, 16384, PROT_READ) = 0<br />mprotect(0x600000, 4096, PROT_READ) = 0<br />mprotect(0x7f1cd4fed000, 4096, PROT_READ) = 0<br />munmap(0x7f1cd4fd4000, 93381) = 0<br />stat(0x1, hello world<br />{st_mode=S_IFDIR|S_ISGID|S_ISVTX|016117200273, st_size=140735093229307, ...}) = 12<br />exit_group(12) = ?<br />&#43;&#43;&#43; exited with 12 &#43;&#43;&#43;</p>", "subject": "lab1-ex0.s无法strace系统调用sys_write&#xff1f;"}, {"uid": "i6uqzf449em3ex", "anon": "no", "created": "2015-03-09T14:25:09Z", "content": "<p>commit d862f5042486e81a0241e9196306d28f4f72acf0</p>\n<p></p>\n<p># rm a.out &amp;&amp; gcc -g lab1-ex0.s &amp;&amp; strace ./a.out</p>\n<p>execve(&#34;./a.out&#34;, [&#34;./a.out&#34;], [/* 36 vars */]) = 0<br />brk(0) = 0x19c5000<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK) = -1 ENOENT (No such file or directory)<br />mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7feaa55f2000<br />access(&#34;/etc/ld.so.preload&#34;, R_OK) = -1 ENOENT (No such file or directory)<br />open(&#34;/etc/ld.so.cache&#34;, O_RDONLY|O_CLOEXEC) = 3<br />fstat(3, {st_mode=S_IFREG|0644, st_size=93381, ...}) = 0<br />mmap(NULL, 93381, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7feaa55db000<br />close(3) = 0<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK) = -1 ENOENT (No such file or directory)<br />open(&#34;/lib/x86_64-linux-gnu/libc.so.6&#34;, O_RDONLY|O_CLOEXEC) = 3<br />read(3, &#34;\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0\\320\\37\\2\\0\\0\\0\\0\\0&#34;..., 832) = 832</p>\n<p>▽<br />fstat(3, {st_mode=S_IFREG|0755, st_size=1845024, ...}) = 0<br />mmap(NULL, 3953344, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7feaa500c000</p>\n<p>▽<br />mprotect(0x7feaa51c7000, 2097152, PROT_NONE) = 0<br />mmap(0x7feaa53c7000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1bb000) = 0x7feaa53c7000<br />mmap(0x7feaa53cd000, 17088, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7feaa53cd000<br />close(3) = 0<br />mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fe<br />▽<br />aa55da000<br />mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7feaa55d8000<br />arch_prctl(ARCH_SET_FS, 0x7feaa55d8740) = 0<br />mprotect(0x7feaa53c7000, 16384, PROT_READ) = 0<br />mprotect(0x600000, 4096, PROT_READ) = 0<br />mprotect(0x7feaa55f4000, 4096, PROT_READ) = 0<br />munmap(0x7feaa55db000, 93381) = 0<br />stat(0x1, hello world<br />{st_mode=032162553273, st_size=140736713119483, ...}) = 12<br />exit_group(12) = ?<br />&#43;&#43;&#43; exited with 12 &#43;&#43;&#43;</p>", "subject": "lab1-ex0.s无法strace系统调用sys_write&#xff1f;"}], "s_edits": [], "is_bookmarked": false, "tag_good_arr": ["hcrrjuyequh4bt"], "request_instructor_me": false, "my_favorite": false, "t": 1446634764159, "children": [{"is_tag_endorse": false, "created": "2015-03-09T15:04:11Z", "id": "i7201wpwyih3ty", "tag_endorse": [{"name": "Yu Chen", "id": "hcrrjuyequh4bt", "role": "instructor", "facebook_id": null, "photo": "1378950179_35.png", "admin": true, "us": false}], "folders": [], "history": [{"uid": "hcrrjuyequh4bt", "anon": "no", "created": "2015-03-09T15:07:18Z", "content": "<p>很好的尝试&#xff01;&#xff01;&#xff01;</p>\n<p></p>\n<p>用下面的命令试试&#xff1f; 在我的机器&#xff08;ubuntu kylin 14.10 64bit, gcc-4.9.1&#xff09;&#xff0c;可以看到write 系统调用的输出。</p>\n<p>“-f”的含义是</p>\n<p>&#34;Trace  child  processes  as  they are created by currently traced processes as a result of the fork(2), vfork(2) and clone(2) system calls.Note that -p PID -f will attach all threads of process PID if it is multi-threaded, not only thread with thread_id = PID.&#34;<br /><br /></p>\n<p>$ strace  -f ./a.out <br />execve(&#34;./a.out&#34;, [&#34;./a.out&#34;], [/* 65 vars */]) = 0<br />[ Process PID=5092 runs in 32 bit mode. ]<br />brk(0)                                  = 0x860f000<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK)      = -1 ENOENT (No such file or directory)<br />mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xfffffffff77a2000<br />access(&#34;/etc/ld.so.preload&#34;, R_OK)      = -1 ENOENT (No such file or directory)<br />open(&#34;/etc/ld.so.cache&#34;, O_RDONLY|O_CLOEXEC) = 3<br />fstat64(3, {st_mode=S_IFREG|0644, st_size=146903, ...}) = 0<br />mmap2(NULL, 146903, PROT_READ, MAP_PRIVATE, 3, 0) = 0xfffffffff777e000<br />close(3)                                = 0<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK)      = -1 ENOENT (No such file or directory)<br />open(&#34;/lib/i386-linux-gnu/libc.so.6&#34;, O_RDONLY|O_CLOEXEC) = 3<br />read(3, &#34;\\177ELF\\1\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0\\3\\0\\1\\0\\0\\0\\340\\233\\1\\0004\\0\\0\\0&#34;..., 512) = 512<br />fstat64(3, {st_mode=S_IFREG|0755, st_size=1753800, ...}) = 0<br />mmap2(NULL, 1755772, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xfffffffff75d1000<br />mmap2(0xf7778000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1a7000) = 0xfffffffff7778000<br />mmap2(0xf777b000, 10876, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xfffffffff777b000<br />close(3)                                = 0<br />mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xfffffffff75d0000<br />set_thread_area(0xffb6b7e0)             = 0<br />mprotect(0xf7778000, 8192, PROT_READ)   = 0<br />mprotect(0x8049000, 4096, PROT_READ)    = 0<br />mprotect(0xf77c7000, 4096, PROT_READ)   = 0<br />munmap(0xf777e000, 146903)              = 0<br />write(1, &#34;hello world\\n&#34;, 12hello world<br />)           = 12<br />exit_group(12)                          = ?<br />&#43;&#43;&#43; exited with 12 &#43;&#43;&#43;<br /><br /></p>", "subject": ""}, {"uid": "hcrrjuyequh4bt", "anon": "no", "created": "2015-03-09T15:04:11Z", "content": "<p>用下面的命令试试&#xff1f; 在我的机器&#xff08;ubuntu kylin 14.10 64bit, gcc-4.9.1&#xff09;&#xff0c;可以看到write 系统调用的输出。</p>\n<p>“-f”的含义是</p>\n<p>&#34;Trace  child  processes  as  they are created by currently traced processes as a result of the fork(2), vfork(2) and clone(2) system calls.Note that -p PID -f will attach all threads of process PID if it is multi-threaded, not only thread with thread_id = PID.&#34;<br /><br /></p>\n<p>$ strace  -f ./a.out <br />execve(&#34;./a.out&#34;, [&#34;./a.out&#34;], [/* 65 vars */]) = 0<br />[ Process PID=5092 runs in 32 bit mode. ]<br />brk(0)                                  = 0x860f000<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK)      = -1 ENOENT (No such file or directory)<br />mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xfffffffff77a2000<br />access(&#34;/etc/ld.so.preload&#34;, R_OK)      = -1 ENOENT (No such file or directory)<br />open(&#34;/etc/ld.so.cache&#34;, O_RDONLY|O_CLOEXEC) = 3<br />fstat64(3, {st_mode=S_IFREG|0644, st_size=146903, ...}) = 0<br />mmap2(NULL, 146903, PROT_READ, MAP_PRIVATE, 3, 0) = 0xfffffffff777e000<br />close(3)                                = 0<br />access(&#34;/etc/ld.so.nohwcap&#34;, F_OK)      = -1 ENOENT (No such file or directory)<br />open(&#34;/lib/i386-linux-gnu/libc.so.6&#34;, O_RDONLY|O_CLOEXEC) = 3<br />read(3, &#34;\\177ELF\\1\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0\\3\\0\\1\\0\\0\\0\\340\\233\\1\\0004\\0\\0\\0&#34;..., 512) = 512<br />fstat64(3, {st_mode=S_IFREG|0755, st_size=1753800, ...}) = 0<br />mmap2(NULL, 1755772, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xfffffffff75d1000<br />mmap2(0xf7778000, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1a7000) = 0xfffffffff7778000<br />mmap2(0xf777b000, 10876, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xfffffffff777b000<br />close(3)                                = 0<br />mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xfffffffff75d0000<br />set_thread_area(0xffb6b7e0)             = 0<br />mprotect(0xf7778000, 8192, PROT_READ)   = 0<br />mprotect(0x8049000, 4096, PROT_READ)    = 0<br />mprotect(0xf77c7000, 4096, PROT_READ)   = 0<br />munmap(0xf777e000, 146903)              = 0<br />write(1, &#34;hello world\\n&#34;, 12hello world<br />)           = 12<br />exit_group(12)                          = ?<br />&#43;&#43;&#43; exited with 12 &#43;&#43;&#43;<br /><br /></p>", "subject": ""}], "config": {}, "data": {"embed_links": []}, "bucket_order": 2, "bucket_name": "Today", "tag_endorse_arr": ["hcrrjuyequh4bt"], "children": [], "type": "i_answer"}, {"uid": "i6uqzf449em3ex", "no_answer": 0, "created": "2015-03-09T15:29:02Z", "id": "i720xutta937i0", "updated": "2015-03-09T15:29:02Z", "subject": "<p>Ubuntu 14.04 gcc 4.9.2/4.8.2</p>\n<p>CentOS 6.5 gcc 4.8.2</p>\n<p></p>\n<p>即使strace -f也都不行哎&#xff0c;老师用的是一个程序吗&#xff1f;为了排除变量&#xff0c;我把defines.h的东西填了进去</p>\n<p>暂时还没Ubuntu 14.10的环境。。。还没试。。。</p>\n<p></p>\n<pre>.data\nhello:\n\t.string &#34;hello world\\n&#34;\n\n.globl\tmain\nmain:\n\tmovl\t$4,%eax\n\tmovl\t$1,%ebx\n\tmovl\t$hello,%ecx\n\tmovl\t$12,%edx\n\tint\t$0x80\n\tret</pre>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "hdjoucuyb836fq", "created": "2015-03-10T00:58:38Z", "id": "i72lad8oeve4wa", "updated": "2015-03-10T00:58:38Z", "subject": "<p>gcc -g  <span style=\"text-decoration:underline\"><strong>-m32</strong></span> -o lab1-ex0.exe lab1-ex0.s</p>\n<p></p>\n<p>如果有兴趣的话可以查一下对于汇编一致的32位和64位的ELF&#xff0c;strace为什么会有不同的结果。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 2, "bucket_name": "Today", "children": [], "type": "feedback"}], "type": "followup"}], "type": "question", "unique_views": 83, "created": "2015-03-09T14:25:09Z", "id": "i71ynpm7et673i", "no_answer": 0, "nr": 56, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["q&a"], "bucket_order": 2, "change_log": [{"uid": "i6uqzf449em3ex", "when": "2015-03-09T14:25:09Z", "data": "i71ynpma9ca73j", "anon": "no", "type": "create"}, {"uid": "i6uqzf449em3ex", "when": "2015-03-09T14:26:08Z", "data": "i71yoytmh087na", "anon": "no", "type": "update"}, {"uid": "hcrrjuyequh4bt", "when": "2015-03-09T15:04:11Z", "data": "i7201wpzszz3tz", "to": "i71ynpm7et673i", "anon": "no", "type": "i_answer"}, {"uid": "hcrrjuyequh4bt", "when": "2015-03-09T15:07:18Z", "data": "i7205xd9i3s1gt", "anon": "no", "type": "i_answer_update"}, {"uid": "i6uqzf449em3ex", "when": "2015-03-09T15:29:02Z", "to": "i71ynpm7et673i", "anon": "no", "type": "followup"}, {"uid": "hdjoucuyb836fq", "when": "2015-03-10T00:58:38Z", "to": "i71ynpm7et673i", "anon": "no", "type": "feedback"}], "bucket_name": "Today", "tags": ["q&a", "student"], "no_answer_followup": 0, "num_favorites": 0, "tag_good": [{"name": "Yu Chen", "id": "hcrrjuyequh4bt", "role": "instructor", "facebook_id": null, "photo": "1378950179_35.png", "admin": true, "us": false}]}}