{"aid": "int0taeu10y2k3", "result": {"folders": ["lab2"], "unique_views": 48, "no_answer": 0, "change_log": [{"data": "inh4h1dme5z24c", "anon": "no", "when": "2016-04-26T07:39:45Z", "uid": "illojz7yoPj", "type": "create"}, {"uid": "hs2swpdtr91gu", "data": "inhe22loaia4tp", "when": "2016-04-26T12:08:03Z", "to": "inh4h1cjag524a", "anon": "no", "type": "i_answer"}, {"to": "inh4h1cjag524a", "anon": "no", "when": "2016-04-27T06:01:42Z", "uid": "illojz7yoPj", "type": "followup"}, {"to": "inh4h1cjag524a", "anon": "no", "when": "2016-05-04T06:41:41Z", "uid": "hs2swpdtr91gu", "type": "feedback"}], "upvote_ids": [], "id": "inh4h1cjag524a", "bookmarked": 4, "no_answer_followup": 1, "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "is_tag_endorse": false, "created": "2016-04-26T12:08:03Z", "config": {}, "tag_endorse_arr": ["illojz7yoPj"], "children": [], "bucket_name": "Today", "type": "i_answer", "tag_endorse": [{"name": "天信", "admin": false, "photo": null, "us": false, "email": "wen675470193@qq.com", "role": "student", "facebook_id": null, "id": "illojz7yoPj"}], "bucket_order": 2, "data": {"embed_links": []}, "id": "inhe22lj92a4to", "history": [{"content": "<p>进行内存管理的时候&#xff0c;boot_pgdir也是一页&#xff0c;所以对它自身也要进行管理</p>", "anon": "no", "subject": "", "uid": "hs2swpdtr91gu", "created": "2016-04-26T12:08:03Z"}]}, {"folders": [], "updated": "2016-04-27T06:01:42Z", "no_upvotes": 0, "uid": "illojz7yoPj", "created": "2016-04-27T06:01:42Z", "type": "followup", "no_answer": 1, "id": "inigesrtxfb3kp", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [{"folders": [], "updated": "2016-05-04T06:41:41Z", "uid": "hs2swpdtr91gu", "created": "2016-05-04T06:41:41Z", "type": "feedback", "id": "inshx62phw662d", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p>pte的低12位肯定是0&#xff0c;所以要进行清零操作</p>\n<p>pages是page数组的起始位置&#xff0c;page-pages得到了相对的偏移量</p>"}], "subject": "<p>很感谢您的回答。 已经明白上个问题 ^ ^。</p>\n<p></p>\n<p>不过又有了两个新的困惑。</p>\n<p></p>\n<ul><li>关于宏定义中获取二级页表的问题</li></ul>\n<pre> #define PTE_ADDR(pte)   ((uintptr_t)(pte) &amp; ~0xFFF)<br />  #define PDE_ADDR(pde)     PTE_ADDR(pde)</pre>\n<p></p>\n<p>我的理解是&#xff1a; 一级页表&#xff08;即boot_pgdir变量&#xff09;中的目录项&#xff08;即pde&#xff09;存放的是 二级页表的起始地址。</p>\n<p>但是<strong>为什么根据 pde 来获取二级页表的起始地址时&#xff0c;还需要做一个  &amp;  ~0xFFF的操作&#xff1f;</strong></p>\n<p><strong></strong></p>\n<p><strong></strong></p>\n<ul><li>关于根据 页的虚拟地址获取物理地址的问题</li></ul>\n<pre>struct Page * page = alloc_page() ;    // 分配一页并将该页的虚拟地址放到page变量中<br />page2pa(page);                         // 返回该页的物理地址。</pre>\n<p>困惑是 调用 <strong>page2pa 函数后&#xff0c;为什么 (page - pages)  &lt;&lt; 12 得到的是该页的物理地址呢&#xff1f;</strong></p>\n<pre>static inline ppn_t<br />page2ppn(struct Page *page) {<br />    return page - pages;<br />}<br /><br />static inline uintptr_t<br />page2pa(struct Page *page) {<br />    return page2ppn(page) &lt;&lt; PGSHIFT;<br />}</pre>\n<p></p>"}], "request_instructor_me": false, "nr": 836, "bucket_order": 2, "config": {}, "status": "active", "tags": ["lab2", "student"], "num_favorites": 1, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "created": "2016-04-26T07:39:45Z", "is_tag_good": false, "type": "question", "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1462375833078, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>大家好~   有一个小小的困惑&#xff1a;是关于 将页目录 (pgdir的物理地址 映射到 虚拟地址 VPT上)的问题</p>\n<p></p>\n<pre>boot_pgdir[PDX(VPT)] = PADDR(boot_pgdir) | PTE_P | PTE_W;</pre>\n<p></p>\n<p>此时 boot_pgdir是 刚一个页的虚拟地址。不太懂 boot_pgdir[PDX(VPT)] 的意义。</p>\n<p>&#xff08;已知&#xff1a; PDX&#xff08;VPT&#xff09;是虚拟地址VPT  页目录的index &#xff1b; boot_pgdir 是一个 pde_t * 指针&#xff0c;即unsigned int *&#xff09;。</p>\n<p>为什么要让boot_pgdir指针向后 PDX(VPT) &#xff0c;再设置它的内容呢&#xff1f;</p>", "anon": "no", "subject": "关于链接地址 虚拟地址关系的问题。", "uid": "illojz7yoPj", "created": "2016-04-26T07:39:45Z"}]}, "error": null}