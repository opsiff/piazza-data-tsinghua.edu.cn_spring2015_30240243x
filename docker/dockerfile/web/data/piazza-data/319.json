{"aid": "igkpmuy9jk9qy", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 4, "request_instructor": 0, "history": [{"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T15:45:23Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault&#xff0c;非法内存访问</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会直接崩溃&#xff0c;i386没有这样的问题。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}, {"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T14:03:02Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault&#xff0c;非法内存访问</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}, {"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T14:02:32Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}, {"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T14:01:51Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}, {"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T14:01:29Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}, {"uid": "i6un8w0cKfP", "anon": "no", "created": "2015-04-19T14:00:41Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后还是不行。</p>\n<p></p>", "subject": "ucore_plus x86_64本身内存有问题"}], "s_edits": [], "is_bookmarked": false, "tag_good_arr": [], "request_instructor_me": false, "my_favorite": false, "t": 1446635851569, "children": [{"is_tag_endorse": false, "created": "2015-04-19T15:22:41Z", "id": "i8olrmgwwr363y", "tag_endorse": [], "folders": [], "history": [{"uid": "hdjonbiyfs62ie", "anon": "no", "created": "2015-04-19T15:22:41Z", "content": "<p>下面链接是与x86-64的ucore最新工作&#xff0c;可供参考。</p>\n<p></p>\n<p><a href=\"http://os.cs.tsinghua.edu.cn/oscourse/OS2013/projects/U01\">http://os.cs.tsinghua.edu.cn/oscourse/OS2013/projects/U01</a></p>\n<p></p>\n<p>李恺威同学当时的工作是对64位时的系统调用实现进行优化和完善。我的印象是&#xff0c;他改正了不少64位下比较难调的内核错误。最后结果好像没有合并到主分支上。</p>\n<p></p>", "subject": ""}], "config": {}, "data": {"embed_links": []}, "bucket_order": 2, "bucket_name": "Today", "tag_endorse_arr": [], "children": [], "type": "i_answer"}, {"uid": "hcrrjuyequh4bt", "no_answer": 0, "created": "2015-04-19T15:46:58Z", "id": "i8ommuq4uto5ja", "updated": "2015-04-19T15:46:58Z", "subject": "<p>我觉得你可以从32位的x86入手。我已经搭建了一个x86-32 ucore-plus的编译运行环境&#xff0c;给你们发了电邮&#xff0c;你们可以看看并试试。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 4, "bucket_name": "This week", "no_upvotes": 0, "children": [{"uid": "i6un8w0cKfP", "created": "2015-04-19T15:52:54Z", "id": "i8omuhpkqqk71b", "updated": "2015-04-19T15:52:54Z", "subject": "<p>我尝试了x86的&#xff0c;目前musl动态链接库的重定位似乎已经正常工作可以进入syscall&#xff0c;前几个需要实现的syscall主要是一些tls的东西&#xff0c;然后应该就可以进main了。x86_64由于以上问题不能启动。</p>\n<p>我看了一下linux的x86和x64的syscall&#xff0c;差异比较大&#xff0c;编号和数量内容均不同。如果最终要做x86_64的话先去弄x86似乎不太现实。</p>\n<p></p>\n<p>[update] 我才发现李恺威的工作。。目前看来是得在他的基础上做了&#xff0c;我之前看到的可运行代码都是arm的导致我一开始计划从头弄起。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 4, "bucket_name": "This week", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6un8w0cKfP", "no_answer": 0, "created": "2015-04-20T10:02:57Z", "id": "i8ppsaw2ogs2bp", "updated": "2015-04-20T10:02:57Z", "subject": "<p>李恺威的代码也有同样的问题。。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 4, "bucket_name": "This week", "no_upvotes": 0, "children": [{"uid": "hcrrjuyequh4bt", "created": "2015-04-21T14:18:00Z", "id": "i8rec5ig3f34pm", "updated": "2015-04-21T14:18:00Z", "subject": "<p>明确最终目标和阶段性目标&#xff0c;已经研究步骤很重要。</p>\n<p>明天上午11点有空吗&#xff1f;如有空&#xff0c;请到fit 3-106面谈解决。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 2, "bucket_name": "Today", "children": [], "type": "feedback"}], "type": "followup"}], "type": "question", "unique_views": 55, "created": "2015-04-19T14:00:41Z", "id": "i8oiu5yv4i1y1", "no_answer": 0, "nr": 319, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["big_proj"], "bucket_order": 2, "change_log": [{"uid": "i6un8w0cKfP", "when": "2015-04-19T14:00:41Z", "data": "i8oiu5yyd6y1y2", "anon": "no", "type": "create"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T14:01:29Z", "data": "i8oiv722alt3ao", "anon": "no", "type": "update"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T14:01:51Z", "data": "i8oivo2xoym4qe", "anon": "no", "type": "update"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T14:02:32Z", "data": "i8oiwjixw273id", "anon": "no", "type": "update"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T14:03:02Z", "data": "i8oix72u7356st", "anon": "no", "type": "update"}, {"uid": "hdjonbiyfs62ie", "when": "2015-04-19T15:22:41Z", "data": "i8olrmgz6d563z", "to": "i8oiu5yv4i1y1", "anon": "no", "type": "i_answer"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T15:45:23Z", "data": "i8omkttsm6e54g", "anon": "no", "type": "update"}, {"uid": "hcrrjuyequh4bt", "when": "2015-04-19T15:46:58Z", "to": "i8oiu5yv4i1y1", "anon": "no", "type": "followup"}, {"uid": "i6un8w0cKfP", "when": "2015-04-19T15:52:54Z", "to": "i8oiu5yv4i1y1", "anon": "no", "type": "feedback"}, {"uid": "i6un8w0cKfP", "when": "2015-04-20T10:02:57Z", "to": "i8oiu5yv4i1y1", "anon": "no", "type": "followup"}, {"uid": "hcrrjuyequh4bt", "when": "2015-04-21T14:18:00Z", "to": "i8oiu5yv4i1y1", "anon": "no", "type": "feedback"}], "bucket_name": "Today", "tags": ["big_proj", "student"], "no_answer_followup": 0, "num_favorites": 0, "tag_good": []}}