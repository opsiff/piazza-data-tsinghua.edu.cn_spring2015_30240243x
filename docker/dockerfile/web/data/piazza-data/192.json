{"aid": "igkpaimuh4e3ch", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 6, "request_instructor": 0, "history": [{"anon": "stud", "created": "2015-04-01T12:53:11Z", "content": "<p>老师好&#xff0c;</p>\n<p></p>\n<p>在default_pmm.c的第26&amp;27行&#xff0c;</p>\n<p></p>\n<p>First you should init each page (in memlayout.h) in this free block, include: p-&gt;flags should be set bit PG_property (means this page is valid. </p>\n<p></p>\n<p>但是在memlayut.h中对于PG_property的解释是</p>\n<p></p>\n<p>if this bit=1: the Page is the head page of a free memory block(contains some continuous_addrress pages), and can be used in alloc_pages; if this bit=0: if the Page is the the head page of a free memory block, then this Page and the memory block is alloced. Or this Page isn&#39;t the head page.</p>\n<p></p>\n<p>感觉default_init_memmap函数中不应该只有第一个page作为free memory block的head才应该设成1&#xff0c;后面block中的page此位应该设成0才对吗&#xff1f;还是我理解的不到位。。。</p>\n<p></p>\n<p>谢谢&#xff01;</p>\n<p></p>", "subject": "lab2 default_pmm.c注释的疑惑"}, {"anon": "full", "created": "2015-03-28T06:12:52Z", "content": "<p>老师好&#xff0c;</p>\n<p></p>\n<p>在default_pmm.c的第26&amp;27行&#xff0c;</p>\n<p></p>\n<p>First you should init each page (in memlayout.h) in this free block, include: p-&gt;flags should be set bit PG_property (means this page is valid. </p>\n<p></p>\n<p>但是在memlayut.h中对于PG_property的解释是</p>\n<p></p>\n<p>if this bit=1: the Page is the head page of a free memory block(contains some continuous_addrress pages), and can be used in alloc_pages; if this bit=0: if the Page is the the head page of a free memory block, then this Page and the memory block is alloced. Or this Page isn&#39;t the head page.</p>\n<p></p>\n<p>感觉default_init_memmap函数中不应该只有第一个page作为free memory block的head才应该设成1&#xff0c;后面block中的page此位应该设成0才对吗&#xff1f;还是我理解的不到位。。。</p>\n<p></p>\n<p>谢谢&#xff01;</p>\n<p></p>", "subject": "lab2 default_pmm.c注释的疑惑"}], "s_edits": [], "is_bookmarked": false, "tag_good_arr": [], "request_instructor_me": false, "my_favorite": false, "t": 1446635275734, "children": [{"is_tag_endorse": false, "created": "2015-03-28T07:10:42Z", "id": "i7soi6vm78p6m5", "tag_endorse": [{"name": "MINNE LI", "id": "i6yijp8lzvk2yv", "role": "student", "facebook_id": null, "photo": null, "admin": false, "us": false}], "folders": [], "history": [{"uid": "hdjoucuyb836fq", "anon": "no", "created": "2015-03-28T07:10:42Z", "content": "<p>PG_property位最初是为buddy system设置的&#xff0c;在实现first fit算法时&#xff0c;可以简单理解成PG_property意味着页可用&#xff0c;PG_reserved意味着页已分配或不可用。</p>\n<p></p>\n<p>代码中的注释提供了一种参考的实现方式&#xff0c;但绝不是唯一的标准答案&#xff0c;你完全可以按照自己的理解&#xff0c;用自己的方式实现页分配算法。</p>", "subject": ""}], "config": {}, "data": {"embed_links": []}, "bucket_order": 2, "bucket_name": "Today", "tag_endorse_arr": ["i6yijp8lzvk2yv"], "children": [], "type": "i_answer"}, {"no_answer": 0, "created": "2015-03-28T07:30:59Z", "id": "i7sp89p6qq34x3", "updated": "2015-03-28T07:30:59Z", "subject": "<p>如果按照注释里对PG_property的理解&#xff0c;free block中非head的page此位为0的话&#xff0c;实现之后在check时由于default_check()函数中的</p>\n<pre>default_check(void) {\n    int count = 0, total = 0;\n    list_entry_t *le = &amp;free_list;\n    while ((le = list_next(le)) != &amp;free_list) {\n        struct Page *p = le2page(le, page_link);\n        assert(PageProperty(p));\n        count &#43;&#43;, total &#43;= p-&gt;property;\n    }</pre>\n<p>第六行会强制验证是否所有Page&#xff08;无论是否是head&#xff09;的PG_property位为1&#xff0c;若把此行注释掉的话就可以通过测试。。</p>", "anon": "full", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 5, "bucket_name": "Last week", "no_upvotes": 0, "children": [{"uid": "hdjoucuyb836fq", "created": "2015-03-28T08:48:26Z", "id": "i7srzv6cjoi1zl", "updated": "2015-03-28T08:48:26Z", "subject": "<p>注意注释里的head page指的是一个a free memory block的head page&#xff0c;即一块可用且连续的内存的第一个页&#xff0c;而free_list中的每一个都是a free memory block。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 5, "bucket_name": "Last week", "children": [], "type": "feedback"}, {"created": "2015-03-28T09:58:50Z", "id": "i7suiejkzxh2cc", "updated": "2015-03-28T09:58:50Z", "subject": "<p>意思是free_list中的链表项都是每一个free block的第一页吗&#xff1f;还是里面包含了所有空闲的页面&#xff1f;</p>", "anon": "full", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 5, "bucket_name": "Last week", "children": [], "type": "feedback"}, {"uid": "hdjoucuyb836fq", "created": "2015-03-28T11:42:55Z", "id": "i7sy89n9pue311", "updated": "2015-03-28T11:42:55Z", "subject": "<p>free_list中的都是head page of a free memory block&#xff0c;每一个memory block的大小保存在head page对应Page结构的property域。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 5, "bucket_name": "Last week", "children": [], "type": "feedback"}, {"created": "2015-03-29T15:43:44Z", "id": "i7um9t8qmok1nc", "updated": "2015-03-29T15:43:44Z", "subject": "<p>可是lab2_result里的实现并不是助教所说的这个意思&#xff0c;它将每个page都加入了free_list</p>", "anon": "stud", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 4, "bucket_name": "This week", "children": [], "type": "feedback"}, {"uid": "hdjoucuyb836fq", "created": "2015-03-30T00:35:06Z", "id": "i7v5956g28r2uf", "updated": "2015-03-30T00:35:06Z", "subject": "<p>我说的是lab2原始代码里的default_pmm中对free_list的用法。free_list本身只是一个page的list&#xff0c;check中只要求了挂在free_list中的page需要标记property位并设置page-&gt;property&#xff0c;至于哪些page应该挂到free_list中&#xff0c;lab2_result只是给了一个参考的实现&#xff0c;并不唯一。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 4, "bucket_name": "This week", "children": [], "type": "feedback"}], "type": "followup"}], "type": "question", "unique_views": 75, "created": "2015-03-28T06:12:52Z", "id": "i7smft8rl004q2", "no_answer": 0, "nr": 192, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["lab2"], "bucket_order": 2, "change_log": [{"when": "2015-03-28T06:12:52Z", "data": "i7smft8ujbg4q3", "anon": "full", "type": "create"}, {"uid": "hdjoucuyb836fq", "when": "2015-03-28T07:10:42Z", "data": "i7soi6w4umo6m6", "to": "i7smft8rl004q2", "anon": "no", "type": "i_answer"}, {"when": "2015-03-28T07:30:59Z", "to": "i7smft8rl004q2", "anon": "full", "type": "followup"}, {"uid": "hdjoucuyb836fq", "when": "2015-03-28T08:48:26Z", "to": "i7smft8rl004q2", "anon": "no", "type": "feedback"}, {"when": "2015-03-28T09:58:50Z", "to": "i7smft8rl004q2", "anon": "full", "type": "feedback"}, {"uid": "hdjoucuyb836fq", "when": "2015-03-28T11:42:55Z", "to": "i7smft8rl004q2", "anon": "no", "type": "feedback"}, {"when": "2015-03-29T15:43:44Z", "to": "i7smft8rl004q2", "anon": "stud", "type": "feedback"}, {"uid": "hdjoucuyb836fq", "when": "2015-03-30T00:35:06Z", "to": "i7smft8rl004q2", "anon": "no", "type": "feedback"}, {"when": "2015-04-01T12:53:11Z", "data": "i7yqi1csl2d68c", "anon": "stud", "type": "update"}], "bucket_name": "Today", "tags": ["lab2", "student"], "no_answer_followup": 0, "num_favorites": 0, "tag_good": []}}