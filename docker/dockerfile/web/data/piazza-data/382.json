{"aid": "igkpt270dx31x0", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 3, "request_instructor": 0, "history": [{"uid": "i6z6k9yt7b77nz", "anon": "no", "created": "2015-05-03T12:38:35Z", "content": "<p>阅读了swap.c中的代码&#xff1a;swap_in</p>\n<p>int<br />swap_in(struct mm_struct *mm, uintptr_t addr, struct Page **ptr_result)<br />{<br /> struct Page *result = alloc_page();<br /> assert(result!=NULL);</p>\n<p>pte_t *ptep = get_pte(mm-&gt;pgdir, addr, 0);<br /> // cprintf(&#34;SWAP: load ptep %x swap entry %d to vaddr 0x%08x, page %x, No %d\\n&#34;, ptep, (*ptep)&gt;&gt;8, addr, result, (result-pages));<br /> <br /> int r;<br /> if ((r = swapfs_read((*ptep), result)) != 0)<br /> {<br /> assert(r!=0);<br /> }<br /> cprintf(&#34;swap_in: load disk swap entry %d with swap_page in vadr 0x%x\\n&#34;, (*ptep)&gt;&gt;8, addr);<br /> *ptr_result=result;<br /> return 0;<br />}</p>\n<p>从代码来看&#xff0c;除非出错直接退出&#xff0c;否则返回值恒为0&#xff1f;</p>\n<p>那么在vmm的do_pgfault中&#xff0c;是不是就不需要检测ret = swap_in(mm,addr,&amp;page)是否为0了&#xff1f;</p>", "subject": "lab3中的swap_in函数&#xff0c;返回值恒为0&#xff1f;"}], "s_edits": [], "is_bookmarked": false, "tag_good_arr": [], "request_instructor_me": false, "my_favorite": false, "t": 1446636140892, "children": [{"is_tag_endorse": false, "created": "2015-05-03T18:47:16Z", "id": "i98t8n7nx4x41c", "tag_endorse": [], "folders": [], "history": [{"uid": "i6ucxgbeel362h", "anon": "no", "created": "2015-05-03T18:47:16Z", "content": "<p>是&#xff0c;不过为了谨慎起见也可以检查</p>", "subject": ""}], "config": {}, "data": {"embed_links": []}, "bucket_order": 2, "bucket_name": "Today", "tag_endorse_arr": [], "children": [], "type": "i_answer"}], "type": "question", "unique_views": 38, "created": "2015-05-03T12:38:35Z", "id": "i98g2igbotf7pb", "no_answer": 0, "nr": 382, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["lab3"], "bucket_order": 2, "change_log": [{"uid": "i6z6k9yt7b77nz", "when": "2015-05-03T12:38:35Z", "data": "i98g2igdq0x7pc", "anon": "no", "type": "create"}, {"uid": "i6ucxgbeel362h", "when": "2015-05-03T18:47:16Z", "data": "i98t8n7ra4o41d", "to": "i98g2igbotf7pb", "anon": "no", "type": "i_answer"}], "bucket_name": "Today", "tags": ["lab3", "student"], "no_answer_followup": 0, "num_favorites": 0, "tag_good": []}}