{"aid": "iln9pwgmuh079j", "result": {"folders": ["课堂问答", "lab0"], "unique_views": 74, "request_instructor_me": false, "change_log": [{"data": "il0yzb7v82134", "anon": "no", "when": "2016-02-24T15:02:17Z", "uid": "i0dlq4m0wjn5eo", "type": "create"}, {"uid": "hdjonbiyfs62ie", "data": "il0znf6akwa6by", "when": "2016-02-24T15:21:02Z", "to": "il0yzb7rsih33", "anon": "no", "type": "i_answer"}, {"to": "il0yzb7rsih33", "anon": "no", "when": "2016-02-24T15:23:28Z", "uid": "i0dlq4m0wjn5eo", "type": "followup"}, {"to": "il0yzb7rsih33", "anon": "no", "when": "2016-02-25T01:51:59Z", "uid": "i0er21z2bhp4dk", "type": "feedback"}, {"to": "il0yzb7rsih33", "anon": "no", "when": "2016-02-25T04:21:49Z", "uid": "hdjonbiyfs62ie", "type": "feedback"}, {"to": "il0yzb7rsih33", "anon": "no", "when": "2016-02-25T10:43:42Z", "uid": "i6w84pnmjCQ", "type": "feedback"}, {"to": "il0yzb7rsih33", "anon": "no", "when": "2016-02-25T14:41:57Z", "uid": "hdjonbiyfs62ie", "type": "feedback"}], "upvote_ids": [], "id": "il0yzb7rsih33", "bookmarked": 6, "no_answer": 0, "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "is_tag_endorse": false, "created": "2016-02-24T15:21:02Z", "config": {}, "tag_endorse_arr": [], "children": [], "bucket_name": "Today", "type": "i_answer", "tag_endorse": [], "bucket_order": 2, "data": {"embed_links": []}, "id": "il0znf66yoa6bx", "history": [{"content": "<p>这是由编译器决定的&#xff0c;并不是在64位系统上&#xff0c;基本的存储单位就一定是64位。</p>", "anon": "no", "subject": "", "uid": "hdjonbiyfs62ie", "created": "2016-02-24T15:21:02Z"}]}, {"folders": [], "updated": "2016-02-24T15:23:28Z", "no_upvotes": 0, "uid": "i0dlq4m0wjn5eo", "created": "2016-02-24T15:23:28Z", "type": "followup", "d-bucket": "Yesterday", "id": "il0zqjv23pg1oa", "anon": "no", "bucket_name": "Yesterday", "no_answer": 1, "config": {}, "bucket_order": 3, "data": null, "children": [{"folders": [], "updated": "2016-02-25T01:51:59Z", "uid": "i0er21z2bhp4dk", "created": "2016-02-25T01:51:59Z", "type": "feedback", "d-bucket": "Yesterday", "id": "il1m6u1xo0jlz", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p>同问 一直没搞懂</p>"}, {"folders": [], "updated": "2016-02-25T04:21:49Z", "uid": "hdjonbiyfs62ie", "created": "2016-02-25T04:21:49Z", "type": "feedback", "d-bucket": "Yesterday", "id": "il1rjj7bq0f73p", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p>准确的原因&#xff0c;我没有找到。我的估计是&#xff0c;在64位机器上&#xff0c;栈是8字节对齐的&#xff0c;并且是小于8字节的参数占8字节。如果可能&#xff0c;核对下是否所有参数都是这样&#xff0c;并在这里回复核对的结果。</p>"}, {"folders": [], "updated": "2016-02-25T10:43:42Z", "uid": "i6w84pnmjCQ", "created": "2016-02-25T10:43:42Z", "type": "feedback", "d-bucket": "Yesterday", "id": "il256mgf22p5zc", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p></p>\n<p>个人愚见&#xff0c;跟机器位数无关&#xff0c;栈是8字节对齐的。变量的大小跟参数压栈没有关系。证据如下。</p>\n<p>参数压栈&#xff1a;doc里PSH/POP系指令都说明了sp是以8为单位操作的</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il22zrv6266u/屏幕快照_20160225_下午5.41.52.png\" height=\"455\" width=\"471\" /></p>\n<p>ENT指令&#xff0c;c.c代码里搜索一下&#xff0c;有3个位置&#xff0c;3个相关的操作数都是8的倍数。以下这里比较重要&#xff0c;loc原先可能不是8对齐的&#xff0c;但是loc&amp;=-8保证了8对齐。我的理解这里应该是压栈和变量声明都完成之后进行8字节对齐。</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il25229ledhd/屏幕快照_20160225_下午6.39.38.png\" height=\"102\" width=\"252\" /></p>\n<p>LEV指令&#xff0c;2个位置&#xff0c;return那里看似不一定是8的倍数&#xff0c;实际上这里的loc一定能被8整除&#xff0c;这跟上一步中loc&amp;=-8有关。</p>\n<p>总结&#xff1a;栈是8字节对齐的。</p>\n<p></p>\n<p>int的创建&#xff1a;一个通过SL指令创建局部变量的例子</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il23kdcxvq4u/屏幕快照_20160225_下午5.52.00.png\" height=\"107\" width=\"529\" /></p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il23m6vamb4b/屏幕快照_20160225_下午5.53.00.png\" height=\"26\" width=\"536\" /></p>\n<p>这是把表达式转化成表达式树&#xff0c;注意size存在[2]的位置上。</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il23jfumbgia/屏幕快照_20160225_下午5.54.07.png\" height=\"27\" width=\"545\" /></p>\n<p>这是一个生成SL语句的例子&#xff0c;其中a[2]就是size。</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il23if07v3ys/屏幕快照_20160225_下午5.55.17.png\" height=\"189\" width=\"404\" /></p>\n<p>c-loc就是size-loc&#xff0c;就是在帧内的偏移&#xff0c;根据之前结论&#xff0c;loc是8的倍数&#xff0c;那么size-loc是不是8对齐就取决于size是不是8对齐。那么int的size大小是多少呢&#xff1f;</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/i6w84pnmjCQ/il20oxu3p5gi/屏幕快照_20160225_下午4.37.10.png\" height=\"285\" width=\"543\" /></p>\n<p>517行&#xff0c;int属于default&#xff0c;大小是4。而且可以看到&#xff0c;size不是8对齐的。</p>"}, {"folders": [], "updated": "2016-02-25T14:41:57Z", "uid": "hdjonbiyfs62ie", "created": "2016-02-25T14:41:57Z", "type": "feedback", "id": "il2dp0i0e475am", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p>在v9-cpu上讨论这个问题时&#xff0c;你的这个回答是成立的&#xff0c;并认为分析比较细致。</p>\n<p></p>\n<p>我想标注你的回答为“优秀解答”&#xff0c;但Piazza上好像只有好问题的标注。我先口头表扬吧。</p>\n<p></p>\n<p>要想确认在其他CPU上是否也如此&#xff0c;可以查一下x86-32和x86-64的CPU指令手册就应该有答案。</p>"}], "subject": "<p>那为什么会出现不一致呢&#xff1f;</p>"}], "no_answer_followup": 1, "nr": 597, "bucket_order": 2, "config": {}, "status": "active", "tags": ["lab0", "student", "课堂问答"], "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "created": "2016-02-24T15:02:17Z", "is_tag_good": false, "type": "question", "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1457674429846, "tag_good": [{"admin_permission": 10, "admin": true, "photo": null, "us": false, "email": "xyong@tsinghua.edu.cn", "class_sections": ["课程设计_i5j09fnsl7k5x0", "清华学生_i5j09fnsl7k5x0"], "role": "instructor", "facebook_id": null, "id": "hdjonbiyfs62ie", "name": "Yong XIANG"}], "tag_good_arr": ["hdjonbiyfs62ie"], "history": [{"content": "<p>在阅读funcall的汇编代码时&#xff0c;发现参数压栈时&#xff0c;每个参数的大小是8Byte&#xff0c;这可以用64位系统来解释。</p>\n<p>那为什么创建一个int i的时候&#xff0c;它的大小仍是4Byte呢&#xff1f;</p>", "anon": "no", "subject": "关于参数和局部变量的大小", "uid": "i0dlq4m0wjn5eo", "created": "2016-02-24T15:02:17Z"}]}, "error": null}