{"aid": "jei4m2rm5z0il", "result": {"status": "active", "unique_views": 66, "request_instructor_me": false, "change_log": [{"type": "create", "anon": "no", "when": "2018-03-04T14:29:45Z", "data": "jecw7zzyum04ly", "uid": "isx6w631skc7on"}, {"type": "update", "anon": "no", "when": "2018-03-04T14:58:02Z", "data": "jecx8dio2in1hp", "uid": "hdjonbiyfs62ie"}, {"uid": "hdjonbiyfs62ie", "type": "i_answer", "when": "2018-03-04T14:58:44Z", "to": "jecw7zzwqgx4lx", "anon": "no", "data": "jecx9a2kr271v6"}, {"type": "i_answer_update", "anon": "no", "when": "2018-03-04T14:59:02Z", "data": "jecx9n9ruvl1zp", "uid": "hdjonbiyfs62ie"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-05T01:45:20Z", "type": "followup", "uid": "isx6w631skc7on"}, {"uid": "isu0wqaoff5125", "type": "s_answer", "when": "2018-03-05T13:50:27Z", "to": "jecw7zzwqgx4lx", "anon": "no", "data": "jeea9argkfw1l8"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-05T23:54:45Z", "type": "followup", "uid": "isx6w631skc7on"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T02:16:28Z", "type": "feedback", "uid": "isu0wqaoff5125"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T03:24:41Z", "type": "feedback", "uid": "hdjonbiyfs62ie"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T09:12:56Z", "type": "feedback", "uid": "j9p3tttiDdhN"}, {"type": "s_answer_update", "anon": "no", "when": "2018-03-06T11:00:52Z", "data": "jefjn2va2er24n", "uid": "isu0wqaoff5125"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T11:02:19Z", "type": "feedback", "uid": "isu0wqaoff5125"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T15:25:56Z", "type": "feedback", "uid": "hdjonbiyfs62ie"}, {"type": "i_answer_update", "anon": "no", "when": "2018-03-06T15:26:29Z", "data": "jeft4nhuztj70l", "uid": "hdjonbiyfs62ie"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-06T15:30:42Z", "type": "followup", "uid": "hdjonbiyfs62ie"}, {"to": "jecw7zzwqgx4lx", "anon": "no", "when": "2018-03-08T04:20:44Z", "type": "feedback", "uid": "isu0wqaoff5125"}, {"type": "s_answer_update", "anon": "no", "when": "2018-03-08T04:21:11Z", "data": "jei08sc558u7mo", "uid": "isu0wqaoff5125"}], "upvote_ids": [], "id": "jecw7zzwqgx4lx", "bookmarked": 4, "no_answer": 0, "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "is_tag_endorse": false, "created": "2018-03-04T14:58:44Z", "type": "i_answer", "tag_endorse_arr": [], "id": "jecx9a2hzvg1v5", "bucket_name": "Today", "config": {}, "tag_endorse": [], "bucket_order": 2, "data": {"embed_links": []}, "children": [], "history": [{"content": "<p>这个问题是被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\"></a></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=14\">https://piazza.com/class/i5j09fnsl7k5x0?cid=14</a></p>\n<p></p>", "anon": "no", "created": "2018-03-06T15:26:29Z", "uid": "hdjonbiyfs62ie", "subject": ""}, {"content": "<p>这个问题是被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a></p>", "anon": "no", "created": "2018-03-04T14:59:02Z", "uid": "hdjonbiyfs62ie", "subject": ""}, {"content": "<p>这个问题被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a></p>", "anon": "no", "created": "2018-03-04T14:58:44Z", "uid": "hdjonbiyfs62ie", "subject": ""}]}, {"folders": [], "updated": "2018-03-05T01:45:20Z", "no_upvotes": 0, "uid": "isx6w631skc7on", "created": "2018-03-05T01:45:20Z", "type": "followup", "no_answer": 0, "id": "jedkcstiunb36t", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p>这两个帖子并没有解答上面的问题。</p>\n<p></p>\n<p>1. <a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\" target=\"_blank\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a>  与我在上文第二自然段的理解相符&#xff0c;这是不是意味着实验指导书有错&#xff1f;</p>\n<p></p>\n<p>2. 怎么解释我在上文第三自然段提到的问题&#xff1f;</p>"}, {"folders": [], "is_tag_endorse": false, "created": "2018-03-05T13:50:27Z", "type": "s_answer", "tag_endorse_arr": ["isvte2o93ju2dt"], "id": "jeea9ardrbl1l7", "bucket_name": "Today", "config": {}, "tag_endorse": [{"name": "Zhang Wei", "admin": true, "photo": null, "endorser": {}, "facebook_id": null, "us": false, "email": "zhangwei15@mails.tsinghua.edu.cn", "role": "ta", "published": true, "id": "isvte2o93ju2dt", "admin_permission": 5}], "bucket_order": 2, "data": {"embed_links": []}, "children": [], "history": [{"content": "<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea7tatpzwh/WechatIMG3.jpeg\" alt=\"\" /></p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea907npd05/WechatIMG4.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>\n<p></p>\n<p>这篇文章也写得很好&#xff0c;几乎解释了所有问题&#xff1a; <a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<p></p>\n<p> </p>", "anon": "no", "created": "2018-03-08T04:21:11Z", "uid": "isu0wqaoff5125", "subject": ""}, {"content": "<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea7tatpzwh/WechatIMG3.jpeg\" alt=\"\" /></p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea907npd05/WechatIMG4.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>\n<p></p>\n<p>这篇文章也写得很好&#xff1a; <a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<p></p>\n<p> </p>", "anon": "no", "created": "2018-03-06T11:00:52Z", "uid": "isu0wqaoff5125", "subject": ""}, {"content": "<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea7tatpzwh/WechatIMG3.jpeg\" alt=\"\" /></p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isu0wqaoff5125/jeea907npd05/WechatIMG4.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>", "anon": "no", "created": "2018-03-05T13:50:27Z", "uid": "isu0wqaoff5125", "subject": ""}]}, {"folders": [], "updated": "2018-03-05T23:54:45Z", "no_upvotes": 0, "uid": "isx6w631skc7on", "created": "2018-03-05T23:54:45Z", "type": "followup", "no_answer": 0, "id": "jeevug8va7c46e", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [{"folders": [], "updated": "2018-03-06T02:16:28Z", "uid": "isu0wqaoff5125", "created": "2018-03-06T02:16:28Z", "type": "feedback", "id": "jef0wosk1dh1xu", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p>可以改主板的设计&#xff0c;把BIOS只映射到4G-x ~ 4G&#xff1f;这样BIOS需要重写。</p>"}, {"folders": [], "updated": "2018-03-06T03:24:41Z", "uid": "hdjonbiyfs62ie", "created": "2018-03-06T03:24:41Z", "type": "feedback", "id": "jef3cfev96s5yk", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p>这两段内存区域在只用20位地址线时&#xff0c;就是一样的了。这是技巧所在。</p>"}, {"folders": [], "updated": "2018-03-06T09:12:56Z", "uid": "j9p3tttiDdhN", "created": "2018-03-06T09:12:56Z", "type": "feedback", "id": "jeffs9nm6op57z", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p><a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<pre>这里貌似说的过于底层了&#xff0c;简单说就是南桥芯片拥有一张地址映射表&#xff0c;当有地址解析的请求到来时&#xff0c;南桥查看这张表决定将地址解析到何处去。这张表里有两个特殊区域&#xff0c;一个是从地址空间4G向下&#xff0c;大小从4MB到16MB不等的一个区域&#xff0c;我们以4MB为例&#xff0c;地址空间从FFFC00000h~FFFFFFFFh。称之为Range 4G。第二个区域一般是是从1MB向下128KB的范围&#xff0c;即E Segment和F Segment&#xff0c;从E0000~FFFFF&#xff0c;称之为Legacy Range&#xff0c;也就是说&#xff0c;FFFC00000h~FFFFFFFFh之间和E0000~FFFFF之间的寻址请求都会被导向到SPI/LPC&#xff0c;最终指向了BIOS。</pre>"}, {"folders": [], "updated": "2018-03-06T11:02:19Z", "uid": "isu0wqaoff5125", "created": "2018-03-06T11:02:19Z", "type": "feedback", "id": "jefjoxt7r5s2s1", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p>那么看起来就是主板上面某个芯片映射的。</p>"}, {"folders": [], "updated": "2018-03-06T15:25:56Z", "uid": "hdjonbiyfs62ie", "created": "2018-03-06T15:25:56Z", "type": "feedback", "id": "jeft3yh81o16ly", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [], "subject": "<p>这个问题以前讨论过。请参见下面帖子。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=14\">https://piazza.com/class/i5j09fnsl7k5x0?cid=14</a></p>\n<p>这里提到的下面链接给出芯片型号。</p>\n<p><a href=\"https://stackoverflow.com/questions/38442880/what-role-does-a20-line-plays-in-protected-mode\">https://stackoverflow.com/questions/38442880/what-role-does-a20-line-plays-in-protected-mode</a></p>\n<p></p>"}], "subject": "<p>twd贴的链接好像也不能解决第二个问题</p>\n<p></p>\n<blockquote>\n<p>如果把BIOS启动固件编址在0xF000起始的64KB内存地址空间内&#xff0c;就会把整个物理内存地址空间隔离成不连续的两段&#xff0c;一段是0xF000以前的地址&#xff0c;一段是1MB以后的地址&#xff0c;这很不协调。为此&#xff0c;intel采用了一个折中的方案</p>\n</blockquote>\n<p></p>\n<p>但是实际上我们观察到0xfffff0和0xfffffff0都被映射到了BIOS&#xff0c;内存还是被隔离成了不连续的两段。</p>"}, {"folders": [], "updated": "2018-03-06T15:30:42Z", "no_upvotes": 0, "uid": "hdjonbiyfs62ie", "created": "2018-03-06T15:30:42Z", "type": "followup", "no_answer": 1, "id": "jefta3bmr2t2tc", "anon": "no", "bucket_name": "This week", "config": {}, "bucket_order": 4, "data": null, "children": [{"folders": [], "updated": "2018-03-08T04:20:44Z", "uid": "isu0wqaoff5125", "created": "2018-03-08T04:20:44Z", "type": "feedback", "id": "jei087jhu2c79r", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p>上面那位同学找到的这个文章<a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a>解释了所有的问题。</p>"}], "subject": "<p>对这个问题的多次讨论和深入推敲分散在多个贴子中。我希望有同学完整地把“机器加电后的第一条指令”整理一下。谁有兴趣&#xff1f;</p>"}], "nr": 1137, "bucket_order": 2, "type": "question", "folders": ["lab1", "2018"], "no_answer_followup": 1, "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "tags": ["2018", "lab1", "student"], "created": "2018-03-04T14:29:45Z", "is_tag_good": false, "config": {}, "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1520490210178, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>按照我的理解&#xff0c;8086取指地址始终是(cs&lt;&lt;4)&#43;ip&#xff0c;cs初始化为0xf000&#xff0c;ip初始化为0xfff0&#xff0c;故执行的第一条指令是0xffff0&#xff1b;80386取指地址是base&#43;eip&#xff0c;base是隐藏寄存器&#xff0c;初始化为0xffff0000&#xff0c;eip初始化为0xfff0&#xff0c;故执行的第一条指令是0xfffffff0。</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html\">https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html</a> 中&#xff0c;“intel资料的说明”部分称第一条指令是0xfffffff0&#xff0c;而“单步调试和查看BIOS代码”部分称第一条指令是0xffff0&#xff0c;不一致&#xff0c;所以我怀疑“单步调试和查看BIOS代码”部分有错。此外&#xff0c;我使用gdb查看第一条指令地址时&#xff0c;gdb误认为该指令为0xfff0&#xff0c;即等于eip&#xff08;已set arch i8086&#xff09;&#xff0c;与上面两种情况均不符。所以我进一步怀疑&#xff0c;若按“单步调试和查看BIOS代码”一节操作&#xff0c;实际上无法得出正确的指令地址。</p>\n<p></p>\n<p>我进一步观察发现&#xff0c;0xffff0和0xfffffff0实际上映射到的是BIOS中同一段指令&#xff0c;所以不管指令地址是上述哪种情况&#xff0c;都可以正常运行&#xff0c;但这也导致我更无法区分事实上执行的是什么地址处的指令。此外&#xff0c;既然0xffff0和0xfffffff0映射到的是同一个位置&#xff0c;80386为什么还要采用与8086不同的第一条指令地址&#xff0c;即为什么80386不沿用0xffff0&#xff1f;</p>", "anon": "no", "created": "2018-03-04T14:58:02Z", "uid": "hdjonbiyfs62ie", "subject": "80386启动后执行的第一条指令是0xfffffff0还是0xffff0&#xff1f;"}, {"content": "<p>按照我的理解&#xff0c;8086取指地址始终是(cs&lt;&lt;4)&#43;ip&#xff0c;cs初始化为0xf000&#xff0c;ip初始化为0xfff0&#xff0c;故执行的第一条指令是0xffff0&#xff1b;80386取指地址是base&#43;eip&#xff0c;base是隐藏寄存器&#xff0c;初始化为0xffff0000&#xff0c;eip初始化为0xfff0&#xff0c;故执行的第一条指令是0xfffffff0。</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html\">https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html</a> 中&#xff0c;“intel资料的说明”部分称第一条指令是0xfffffff0&#xff0c;而“单步调试和查看BIOS代码”部分称第一条指令是0xffff0&#xff0c;不一致&#xff0c;所以我怀疑“单步调试和查看BIOS代码”部分有错。此外&#xff0c;我使用gdb查看第一条指令地址时&#xff0c;gdb误认为该指令为0xfff0&#xff0c;即等于eip&#xff08;已set arch i8086&#xff09;&#xff0c;与上面两种情况均不符。所以我进一步怀疑&#xff0c;若按“单步调试和查看BIOS代码”一节操作&#xff0c;实际上无法得出正确的指令地址。</p>\n<p></p>\n<p>我进一步观察发现&#xff0c;0xffff0和0xfffffff0实际上映射到的是BIOS中同一段指令&#xff0c;所以不管指令地址是上述哪种情况&#xff0c;都可以正常运行&#xff0c;但这也导致我更无法区分事实上执行的是什么地址处的指令。此外&#xff0c;既然0xffff0和0xfffffff0映射到的是同一个位置&#xff0c;80386为什么还要采用与8086不同的第一条指令地址&#xff0c;即为什么80386不沿用0xffff0&#xff1f;</p>", "anon": "no", "created": "2018-03-04T14:29:45Z", "uid": "isx6w631skc7on", "subject": "80386启动后执行的第一条指令是0xfffffff0还是0xffff0&#xff1f;"}]}, "error": null}