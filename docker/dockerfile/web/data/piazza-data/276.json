{"aid": "j0fevg7sxbwjp", "result": {"status": "active", "unique_views": 79, "request_instructor_me": false, "change_log": [{"data": "i8bqwjgdqje10k", "anon": "no", "when": "2015-04-10T15:25:28Z", "uid": "i6sl02qfUgI", "type": "create"}, {"to": "i8bqwjgarfu10j", "anon": "full", "when": "2015-04-10T16:40:34Z", "type": "followup"}, {"data": "i8cl16jlz9q32d", "anon": "no", "when": "2015-04-11T05:28:53Z", "uid": "i6sl02qfUgI", "type": "update"}, {"to": "i8bqwjgarfu10j", "anon": "no", "when": "2015-04-11T13:46:07Z", "uid": "i6un4iacNGX", "type": "followup"}, {"uid": "hdjoucuyb836fq", "data": "i8f7725a2rzbc", "when": "2015-04-13T01:24:51Z", "to": "i8bqwjgarfu10j", "anon": "no", "type": "i_answer"}, {"to": "i8bqwjgarfu10j", "anon": "no", "when": "2015-04-13T01:27:35Z", "uid": "hdjoucuyb836fq", "type": "feedback"}, {"to": "i8bqwjgarfu10j", "anon": "no", "when": "2015-04-13T01:29:18Z", "uid": "hdjoucuyb836fq", "type": "feedback"}, {"data": "i8f8wbev1pm6ic", "anon": "no", "when": "2015-04-13T02:12:29Z", "uid": "i6sl02qfUgI", "type": "update"}, {"type": "update", "anon": "no", "when": "2017-03-18T01:49:49Z", "data": "j0elipg1mpo6xo", "uid": "hdjonbiyfs62ie"}, {"type": "update", "anon": "no", "when": "2017-03-18T04:06:30Z", "data": "j0eqehtqpob19g", "uid": "hdjonbiyfs62ie"}], "upvote_ids": [], "id": "i8bqwjgarfu10j", "bookmarked": 7, "no_answer": 0, "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "updated": "2015-04-10T16:40:34Z", "no_upvotes": 0, "created": "2015-04-10T16:40:34Z", "type": "followup", "no_answer": 0, "id": "i8btl4f4w0q751", "anon": "full", "bucket_name": "Week 4/5 - 4/11", "config": {}, "bucket_order": 106, "data": null, "children": [{"folders": [], "updated": "2015-04-13T01:27:35Z", "uid": "hdjoucuyb836fq", "created": "2015-04-13T01:27:35Z", "type": "feedback", "id": "i8f7akbatcr5zk", "anon": "no", "bucket_name": "Week 4/12 - 4/18", "config": {}, "bucket_order": 105, "data": null, "children": [], "subject": "<p>这时x86对中断/陷阱门的一个hack&#xff0c;手册里的原文&#xff08;第三卷6.12.1.1节&#xff09;&#xff1a;</p>\n<ul><li>The handler can be placed in a nonconforming code segment with privilege level 0. This handler would always run, regardless of the CPL that the interrupted program or task is running at.</li></ul>\n<p>换句话说&#xff0c;如果gate的DPL是0&#xff08;不用管conforming的事情&#xff0c;ucore中没有使用conforming code&#xff09;&#xff0c;那么就不会进行段的检查&#xff0c;直接调用中断/陷阱门中记录的处理例程。</p>"}], "subject": "<p>我有一个类似的问题也想请教各路大神</p>\n<p>在访问门的时候特权级检查有一条为&#xff1a;CPL&lt;=DPL[门]</p>\n<p></p>\n<p></p>\n<p>但是在trap.c中的trap_init中实现为</p>\n<p>      for (i = 0; i &lt; sizeof(idt) / sizeof(struct gatedesc); i &#43;&#43;) {<br />            SETGATE(idt[i], 0, GD_KTEXT, __vectors[i], DPL_KERNEL);<br />      }<br />      SETGATE(idt[T_SYSCALL], 1, GD_KTEXT, __vectors[T_SYSCALL], DPL_USER);<br /><br /></p>\n<p></p>\n<p>只有T_SYSCALL被设置成了DPL_USER</p>\n<p>那么在用户态下&#xff0c;满足CPL&lt;=DPL[门]的只有系统调用一个是吗&#xff1f;</p>\n<p>如果在用户态下出现了缺页异常或者时钟中断之类的&#xff0c;这个检查怎么通过&#xff1f;</p>\n<p>因为这个时候CPL应该是USER的&#xff0c;但是DPL[门]都被设置成了KERNEL啊。。。。。。</p>"}, {"folders": [], "updated": "2015-04-11T13:46:07Z", "no_upvotes": 0, "uid": "i6un4iacNGX", "created": "2015-04-11T13:46:07Z", "type": "followup", "no_answer": 0, "id": "i8d2sm9uba6j1", "anon": "no", "bucket_name": "Week 4/5 - 4/11", "config": {}, "bucket_order": 106, "data": null, "children": [{"folders": [], "updated": "2015-04-13T01:29:18Z", "uid": "hdjoucuyb836fq", "created": "2015-04-13T01:29:18Z", "type": "feedback", "id": "i8f7crtjfyz6pm", "anon": "no", "bucket_name": "Week 4/12 - 4/18", "config": {}, "bucket_order": 105, "data": null, "children": [], "subject": "<p>这也是手册中所使用的术语&#xff0c;如何理解就见仁见智了。</p>"}], "subject": "<p>网上查到的是说 RPL是请求特权等级&#xff0c;所以 CPL&#xff08;current 当前&#xff09;、RPL&#xff08;request请求&#xff09;、DPL&#xff08;destination 目标&#xff09; 这样理解是不是更合理一些&#xff1f;&#xff08;</p>"}, {"folders": [], "is_tag_endorse": false, "created": "2015-04-13T01:24:51Z", "type": "i_answer", "tag_endorse_arr": ["i6sl02qfUgI"], "id": "i8f77254ulqbb", "bucket_name": "Today", "config": {}, "tag_endorse": [{"name": "TTHJ", "admin": false, "photo": null, "us": false, "id": "i6sl02qfUgI", "class_sections": ["清华学生_i5j09fnsl7k5x0"], "role": "student", "facebook_id": null, "email": "363059129@qq.com"}], "bucket_order": 2, "data": {"embed_links": []}, "children": [], "history": [{"content": "<p>1、CPL&lt;=RPL并非必须&#xff0c;不过在访问门或段时总是用MAX(CPL, RPL)与DPL作比较&#xff0c;所以CPL&gt;RPL的情况很少见。ucore里一般都是CPL=RPL。</p>\n<p></p>\n<p>2、注意这里“DPL[门]”和“DPL[段]”是两个DPL&#xff0c;手册里的要求是CPL &gt;= DPL[段]&#xff08;请给出你的公式的出处&#xff0c;我们会尽快改正&#xff09;&#xff0c;并且没有说明为什么不允许通过门执行低级别的代码&#xff08;大概就是没有必要……&#xff09;。</p>\n<p></p>\n<p>3、实际上一般的权限测试确实使用了MAX(CPL, RPL)&#xff0c;但是我们所讨论的只包含执行中断处理例程的情况。中断发生时不存在RPL&#xff0c;所以就简化成了只检查CPL。</p>", "anon": "no", "created": "2015-04-13T01:24:51Z", "uid": "hdjoucuyb836fq", "subject": ""}]}], "nr": 276, "bucket_order": 2, "type": "question", "folders": ["lab1", "lecture7", "2016", "特权级"], "no_answer_followup": 0, "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "tags": ["2016", "lab1", "lecture7", "student", "特权级"], "created": "2015-04-10T15:25:28Z", "is_tag_good": false, "config": {}, "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1489851092440, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>", "anon": "no", "created": "2017-03-18T04:06:30Z", "uid": "hdjonbiyfs62ie", "subject": "关于特权级的问题"}, {"content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>", "anon": "no", "created": "2017-03-18T01:49:49Z", "uid": "hdjonbiyfs62ie", "subject": "关于特权级的问题"}, {"content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>", "anon": "no", "created": "2015-04-13T02:12:29Z", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题"}, {"content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;DPL[段]</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>", "anon": "no", "created": "2015-04-11T05:28:53Z", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题"}, {"content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;DPL[段]</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个调节&#xff0c;CPL&gt;DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>", "anon": "no", "created": "2015-04-10T15:25:28Z", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题"}]}, "error": null}